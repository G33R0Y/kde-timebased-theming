-- Dynamic Conky Configuration matching wallpaper themes
-- Sunrise: Warm golds and pinks
-- Noon: Bright blues and vibrant greens  
-- Sunset: Orange, red, and purple tones
-- Night: Deep blues and indigos with starlight

-- Get current hour to determine theme
local hour = tonumber(os.date("%H"))
local theme = {}

if hour >= 6 and hour < 12 then
    -- Sunrise theme
    theme = {
        bg_alpha = 0.15,
        primary = '#FFB366',      -- Warm golden
        secondary = '#FF8FB3',    -- Soft pink
        accent = '#FFC799',       -- Light golden
        text = '#2A1810',         -- Dark brown
        bar_fg = '#FFB366',
        bar_bg = '#4A3020'
    }
elseif hour >= 12 and hour < 18 then
    -- Noon theme  
    theme = {
        bg_alpha = 0.12,
        primary = '#4A9EFF',      -- Bright blue (headers, bar foreground)
        secondary = '#453a6dff',    -- Medium blue-gray (labels like RAM:, Swap:)
        accent = '#33FF99',       -- Vivid lime green (highlights, graphs)
        text = '#80B3FF',         -- Light blue (values after colons)
        bar_fg = '#4A9EFF',
        bar_bg = '#2D4A66'
    }
elseif hour >= 18 and hour < 24 then
    -- Sunset theme
    theme = {
        bg_alpha = 0.18,
        primary = '#FF6B47',      -- Warm orange
        secondary = '#B366FF',    -- Purple
        accent = '#FF9966',       -- Light orange
        text = '#F5E6DC',         -- Dark purple-brown
        bar_fg = '#FF6B47',
        bar_bg = '#4D2A1A'
    }
else
    -- Night theme
    theme = {
        bg_alpha = 0.20,
        primary = '#6B8CFF',      -- Moonlight blue
        secondary = '#4D66B8',    -- Deep indigo
        accent = '#8FA3FF',       -- Starlight blue
        text = '#C7D2FE',         -- Light blue-white
        bar_fg = '#6B8CFF',
        bar_bg = '#1A2040'
    }
end

conky.config = {
    update_interval = 1,
    double_buffer = true,
    background = true,
    no_buffers = true,
    use_xft = true,
    font = 'JetBrains Mono:size=10',
    xftalpha = 0.8,           -- Reduced transparency for better text readability
    
    -- Enhanced window properties for professional look
    own_window = true,
    own_window_type = 'normal',
    own_window_transparent = false,
    own_window_argb_visual = true,
    own_window_argb_value = math.floor(255 * theme.bg_alpha),
    own_window_hints = 'undecorated,below,sticky,skip_taskbar,skip_pager',
    own_window_class = 'Conky',
    own_window_colour = '000000',
    
    alignment = 'top_right',
    gap_x = 25,
    gap_y = 35,
    minimum_width = 280,
    minimum_height = 0,
    maximum_width = 280,
    
    -- Professional styling
    draw_shades = true,
    draw_outline = false,
    draw_borders = true,
    border_width = 1,
    border_inner_margin = 15,
    border_outer_margin = 5,
    
    -- Dynamic colors based on time
    default_color = theme.text,    -- Light blue for values after colons
    color0 = theme.primary,        -- Headers
    color1 = theme.secondary,      -- Labels (e.g., RAM:, Swap:, Interface:)
    color2 = theme.accent,         -- Highlights (e.g., percentages, network totals)
    color3 = theme.bar_fg,         -- Bar foreground
    color4 = theme.bar_bg,         -- Bar background
    
    -- Replace with your network interface
    template0 = 'wlan0',
    template1 = theme.primary,     -- Dynamic primary color (bright blue)
    template2 = theme.accent       -- Dynamic accent color (vivid lime green)
}

conky.text = [[
${voffset 6}${font JetBrains Mono:bold:size=11}${color0}■ SYSTEM${color}${font}
${voffset 2}${goto 20}${color1}Host:${color} ${if_match ${exec date +%H} >= 12 && ${exec date +%H} < 18}${color2}${else}${color}${endif}${nodename}${color}
${goto 20}${color1}Kernel:${color} ${if_match ${exec date +%H} >= 12 && ${exec date +%H} < 18}${color2}${else}${color}${endif}${kernel}${color}
${goto 20}${color1}Uptime:${color} ${if_match ${exec date +%H} >= 12 && ${exec date +%H} < 18}${color2}${else}${color}${endif}${uptime}${color}

${voffset 8}${font JetBrains Mono:bold:size=11}${color0}▲ PROCESSOR${color}${font}
${goto 20}${color1}CPU:${color} ${color2}${cpu}%${color} | ${freq_g} GHz | ${color1}Load:${color} ${loadavg 1}
${goto 20}${cpubar 6,240 cpu0}
${goto 20}${color1}Core 1:${color} ${alignr}${color2}${cpu cpu1}%${color}
${goto 20}${cpubar 4,240 cpu1}
${if_existing /sys/devices/system/cpu/cpu1}${goto 20}${color1}Core 2:${color} ${alignr}${color2}${cpu cpu2}%${color}
${goto 20}${cpubar 4,240 cpu2}${endif}
${if_existing /sys/devices/system/cpu/cpu2}${goto 20}${color1}Core 3:${color} ${alignr}${color2}${cpu cpu3}%${color}
${goto 20}${cpubar 4,240 cpu3}${endif}
${if_existing /sys/devices/system/cpu/cpu3}${goto 20}${color1}Core 4:${color} ${alignr}${color2}${cpu cpu4}%${color}
${goto 20}${cpubar 4,240 cpu4}${endif}
${if_existing /sys/devices/system/cpu/cpu4}${goto 20}${color1}Core 5:${color} ${alignr}${color2}${cpu cpu5}%${color}
${goto 20}${cpubar 4,240 cpu5}${endif}
${if_existing /sys/devices/system/cpu/cpu5}${goto 20}${color1}Core 6:${color} ${alignr}${color2}${cpu cpu6}%${color}
${goto 20}${cpubar 4,240 cpu6}${endif}
${if_existing /sys/devices/system/cpu/cpu6}${goto 20}${color1}Core 7:${color} ${alignr}${color2}${cpu cpu7}%${color}
${goto 20}${cpubar 4,240 cpu7}${endif}
${if_existing /sys/devices/system/cpu/cpu7}${goto 20}${color1}Core 8:${color} ${alignr}${color2}${cpu cpu8}%${color}
${goto 20}${cpubar 4,240 cpu8}${endif}

${voffset 8}${font JetBrains Mono:bold:size=11}${color0}▪ MEMORY${color}${font}
${voffset 2}${goto 20}${color1}RAM:${color} ${mem} / ${memmax} (${color2}${memperc}%${color})
${goto 20}${membar 6,240}
${goto 20}${color1}Swap:${color} ${swap} / ${swapmax} (${color2}${swapperc}%${color})
${goto 20}${swapbar 6,240}

${voffset 8}${font JetBrains Mono:bold:size=11}${color0}● STORAGE${color}${font}
${voffset 2}${goto 20}${color1}Root:${color} ${fs_used /} / ${fs_size /} (${color2}${fs_used_perc /}%${color})
${goto 20}${fs_bar 6,240 /}
${if_existing /home}${goto 20}${color1}Home:${color} ${fs_used /home} / ${fs_size /home} (${color2}${fs_used_perc /home}%${color})
${goto 20}${fs_bar 6,240 /home}${endif}

${voffset 8}${font JetBrains Mono:bold:size=11}${color0}◆ NETWORK${color}${font}
${voffset 2}${goto 20}${color1}Interface:${color} ${template0}
${goto 20}${color1}Down:${color} ${downspeed ${template0}}
${goto 20}${downspeedgraph ${template0} 20,240 ${template1} ${template2} -t}
${goto 20}${color1}Up:${color} ${upspeed ${template0}}
${goto 20}${upspeedgraph ${template0} 20,240 ${template1} ${template2} -t}
${goto 20}${color1}Total:${color} ${color2}${totaldown ${template0}}${color} | ${color2}${totalup ${template0}}${color}

${voffset 6}${color2}${hr 2}${color}
${voffset 2}${alignc}${font JetBrains Mono:size=9}${color0}CachyOS${color} | ${color0}Updated:${color} ${color2}${time %H:%M}${color}${font}
]]